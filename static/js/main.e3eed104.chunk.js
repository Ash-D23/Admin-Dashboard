(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[0],{105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},110:function(e,t,c){},111:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(30),a=c.n(n),s=c(31),o=c(9),i=c(17),d=c(133),u=c(139),l=c(135),j=c(136),p=c(137),b=(c(82),c(37)),h=Object(b.b)({name:"user",initialState:{currentUser:null,isFetching:!1,error:!1},reducers:{loginStart:function(e){e.isFetching=!0},loginSuccess:function(e,t){e.isFetching=!1,e.currentUser=t.payload},loginFailure:function(e){e.isFetching=!1,e.error=!0},logout:function(e){e.currentUser=null}}}),O=h.actions,g=O.loginStart,m=O.loginSuccess,x=O.loginFailure,f=O.logout,v=h.reducer,P=c(1),S=Object(d.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var k=function(){var e=Object(i.b)(),t=S();return Object(P.jsx)(u.a,{position:"static",children:Object(P.jsxs)(l.a,{children:[Object(P.jsx)(j.a,{variant:"h6",className:t.title,children:Object(P.jsx)(s.b,{className:"Link",to:"/",children:"ADMIN PANEL"})}),Object(P.jsx)(s.b,{className:"Link",to:"/products",children:Object(P.jsx)(p.a,{color:"inherit",children:"Products"})}),Object(P.jsx)(p.a,{color:"inherit",onClick:function(){localStorage.removeItem("persist:root"),localStorage.removeItem("token"),e(f())},children:" Logout "})]})})};c(85);var y,F=function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)(k,{}),Object(P.jsxs)("div",{className:"container",children:[Object(P.jsx)("h2",{children:"Admin Dashboard"}),Object(P.jsx)("div",{className:"btn-container",children:Object(P.jsx)(s.b,{className:"Link",to:"/newproduct",children:Object(P.jsx)(p.a,{color:"primary",variant:"contained",children:" Create New Product "})})})]})]})},N=c(18),w=c(5),I=c.n(w),C=c(14),U=c(39),L=c.n(U),B="https://ecommerce-api-bookstore.herokuapp.com/api/",T="";if(null===(y=JSON.parse(localStorage.getItem("persist:root")))||void 0===y?void 0:y.user){var D,A=JSON.parse(JSON.parse(localStorage.getItem("persist:root")).user);(null===A||void 0===A||null===(D=A.currentUser)||void 0===D?void 0:D.accessToken)&&(T=A.currentUser.accessToken)}var J=L.a.create({baseURL:B}),_=(L.a.create({baseURL:B,headers:{token:"Bearer ".concat(T)}}),Object(b.b)({name:"product",initialState:{products:[],isFetching:!1,error:!1,loading:!1},reducers:{getProductStart:function(e){e.isFetching=!0,e.error=!1},getProductSuccess:function(e,t){e.isFetching=!1,e.products=t.payload},getProductFailure:function(e){e.isFetching=!1,e.error=!0},deleteProductStart:function(e){e.isFetching=!0,e.error=!1},deleteProductSuccess:function(e,t){e.isFetching=!1,e.products.splice(e.products.findIndex((function(e){return e._id===t.payload})),1)},deleteProductFailure:function(e){e.isFetching=!1,e.error=!0},updateProductStart:function(e){e.isFetching=!0,e.error=!1},updateProductSuccess:function(e,t){e.isFetching=!1,e.products[e.products.findIndex((function(e){return e._id===t.payload.id}))]=t.payload.product},updateProductFailure:function(e){e.isFetching=!1,e.error=!0},addProductStart:function(e){e.isFetching=!0,e.error=!1},addProductSuccess:function(e,t){e.isFetching=!1,e.products.push(t.payload)},addProductFailure:function(e){e.isFetching=!1,e.error=!0},loading:function(e,t){e.loading=t.payload}}})),E=_.actions,z=E.getProductStart,R=E.getProductSuccess,G=E.getProductFailure,H=E.deleteProductStart,W=E.deleteProductSuccess,K=E.deleteProductFailure,M=(E.updateProductStart,E.updateProductSuccess,E.updateProductFailure,E.addProductStart),Y=E.addProductSuccess,q=E.addProductFailure,Q=E.loading,V=_.reducer,X=function(){var e=Object(C.a)(I.a.mark((function e(t,c){var r,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.prev=1,e.next=4,J.post("/auth/login",c);case 4:n=e.sent,console.log(n),localStorage.setItem("token",null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.accessToken),t(m(n.data)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t(x());case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,c){return e.apply(this,arguments)}}(),Z=function(){var e=Object(C.a)(I.a.mark((function e(t){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z()),e.prev=1,e.next=4,J.get("/products");case 4:c=e.sent,t(R(c.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(G());case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(C.a)(I.a.mark((function e(t,c){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(H()),e.prev=1,r=localStorage.getItem("token"),e.next=5,L.a.delete("https://ecommerce-api-bookstore.herokuapp.com/api/products/".concat(t),{headers:{"Content-type":"application/json; charset=UTF-8",token:"Bearer ".concat(r)}});case 5:e.sent,c(W(t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(K());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,c){return e.apply(this,arguments)}}(),ee=function(){var e=Object(C.a)(I.a.mark((function e(t,c){var r,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(M()),e.prev=1,r=localStorage.getItem("token"),e.next=5,L.a.post("https://ecommerce-api-bookstore.herokuapp.com/api/products/",t,{headers:{"Content-type":"application/json; charset=UTF-8",token:"Bearer ".concat(r)}});case 5:n=e.sent,c(Y(n.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),c(q());case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,c){return e.apply(this,arguments)}}();c(105);var te=function(){return Object(P.jsx)("div",{className:"loader center-loader",children:Object(P.jsx)("div",{class:"sp sp-circle"})})},ce=function(){var e=Object(r.useState)(""),t=Object(N.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(""),s=Object(N.a)(a,2),o=s[0],d=s[1],u=Object(i.b)();return Object(i.c)((function(e){return e.user.isFetching}))?Object(P.jsx)(te,{}):Object(P.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(P.jsx)("input",{style:{padding:10,marginBottom:20},type:"text",placeholder:"username",onChange:function(e){return n(e.target.value)}}),Object(P.jsx)("input",{style:{padding:10,marginBottom:20},type:"password",placeholder:"password",onChange:function(e){return d(e.target.value)}}),Object(P.jsx)("button",{onClick:function(e){e.preventDefault(),X(u,{username:c,password:o})},style:{padding:10,width:100},children:"Login"})]})};c(106);var re=c(138);function ne(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.product.products}));console.log(t),Object(r.useEffect)((function(){Z(e)}),[e]);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(k,{}),Object(P.jsx)("div",{className:"productList",children:null===t||void 0===t?void 0:t.map((function(t){return Object(P.jsxs)("div",{className:"product-row",children:[Object(P.jsx)("img",{className:"productListImg",src:t.img}),Object(P.jsxs)("div",{className:"product-desc",children:[Object(P.jsxs)("p",{children:[" Product Name: ",t.title]}),Object(P.jsx)("p",{children:t.desc})]}),Object(P.jsxs)("p",{children:["Price:",t.price]}),Object(P.jsx)(re.a,{className:"productListDelete",onClick:function(){return c=t._id,void $(c,e);var c}})]})}))})]})}var ae=function(){return Object(P.jsx)("div",{children:"product"})},se=c(3),oe=c(45),ie=(c(107),c(46)),de=c(68),ue=Object(de.a)({apiKey:"AIzaSyA3f3A37vyPHWcGmW4zwIoHa_72rOcSOE4",authDomain:"ecommerce-store-91ad1.firebaseapp.com",projectId:"ecommerce-store-91ad1",storageBucket:"ecommerce-store-91ad1.appspot.com",messagingSenderId:"935819177020",appId:"1:935819177020:web:a66d712bcd7a022362e739"});function le(){var e=Object(r.useState)({}),t=Object(N.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(null),s=Object(N.a)(a,2),o=s[0],d=s[1],u=Object(r.useState)([]),l=Object(N.a)(u,2),j=l[0],p=l[1],b=Object(i.b)(),h=Object(r.useState)(null),O=Object(N.a)(h,2),g=O[0],m=O[1],x=Object(r.useState)(null),f=Object(N.a)(x,2),v=f[0],S=f[1],y=function(e){n((function(t){return Object(oe.a)(Object(oe.a)({},t),{},Object(se.a)({},e.target.name,e.target.value))}))};return Object(i.c)((function(e){return e.product.loading}))?Object(P.jsx)(te,{}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(k,{}),Object(P.jsx)("div",{children:Object(P.jsxs)("div",{className:"newProduct center",children:[v&&Object(P.jsx)("div",{className:"errormessage",children:"There was an error!"}),g&&Object(P.jsx)("div",{className:"successmessage",children:"Product added Succesfully!"}),Object(P.jsx)("h1",{className:"addProductTitle",children:"New Product"}),Object(P.jsxs)("form",{className:"addProductForm",children:[Object(P.jsxs)("div",{className:"addProductItem",children:[Object(P.jsx)("label",{children:"Image"}),Object(P.jsx)("input",{type:"file",id:"file",onChange:function(e){return d(e.target.files[0])}})]}),Object(P.jsxs)("div",{className:"addProductItem",children:[Object(P.jsx)("label",{children:"Title"}),Object(P.jsx)("input",{name:"title",type:"text",placeholder:"Product Name",onChange:y})]}),Object(P.jsxs)("div",{className:"addProductItem",children:[Object(P.jsx)("label",{children:"Description"}),Object(P.jsx)("input",{name:"desc",type:"text",placeholder:"description...",onChange:y})]}),Object(P.jsxs)("div",{className:"addProductItem",children:[Object(P.jsx)("label",{children:"Price"}),Object(P.jsx)("input",{name:"price",type:"number",placeholder:"Price",onChange:y})]}),Object(P.jsxs)("div",{className:"addProductItem",children:[Object(P.jsx)("label",{children:"Categories"}),Object(P.jsx)("input",{type:"text",placeholder:"",onChange:function(e){p(e.target.value.split(","))}})]}),Object(P.jsxs)("div",{className:"addProductItem",children:[Object(P.jsx)("label",{children:"Stock"}),Object(P.jsxs)("select",{name:"inStock",onChange:y,children:[Object(P.jsx)("option",{value:"true",children:"Yes"}),Object(P.jsx)("option",{value:"false",children:"No"})]})]}),Object(P.jsx)("button",{onClick:function(e){e.preventDefault();var t=(new Date).getTime()+o.name,r=Object(ie.b)(ue),a=Object(ie.c)(r,t),s=Object(ie.d)(a,o);b(Q(!0)),s.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){b(Q(!1)),n({}),d(null),p([]),S(!0),m(!1)}),(function(){Object(ie.a)(s.snapshot.ref).then((function(e){var t=Object(oe.a)(Object(oe.a)({},c),{},{img:e,categories:j});ee(t,b),b(Q(!1)),n({}),d(null),p([]),m(!0),S(!1)}))}))},className:"addProductButton",children:"Create"})]})]})})]})}var je=function(){var e=Object(i.c)((function(e){var t;return null===(t=e.user.currentUser)||void 0===t?void 0:t.isAdmin}));return Object(P.jsx)(s.a,{children:Object(P.jsxs)(o.d,{children:[Object(P.jsx)(o.b,{path:"/login",children:e?Object(P.jsx)(o.a,{to:"/"}):Object(P.jsx)(ce,{})}),Object(P.jsx)(o.b,{exact:!0,path:"/",children:e?Object(P.jsx)(F,{}):Object(P.jsx)(o.a,{to:"/login"})}),e&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(o.b,{path:"/products",children:Object(P.jsx)(ne,{})}),Object(P.jsx)(o.b,{path:"/product/:productId",children:Object(P.jsx)(ae,{})}),Object(P.jsx)(o.b,{path:"/newproduct",children:Object(P.jsx)(le,{})})]})]})})},pe=c(19),be=c(29),he=c(69),Oe={key:"root",version:1,storage:c.n(he).a},ge=Object(pe.b)({user:v,product:V}),me=Object(be.g)(Oe,ge),xe=Object(b.a)({reducer:me,middleware:function(e){return e({serializableCheck:{ignoredActions:[be.a,be.f,be.b,be.c,be.d,be.e]}})}}),fe=Object(be.h)(xe),ve=c(70);c(110);a.a.render(Object(P.jsx)(i.a,{store:xe,children:Object(P.jsx)(ve.a,{loading:"null",persistor:fe,children:Object(P.jsx)(je,{})})}),document.getElementById("root"))},82:function(e,t,c){},85:function(e,t,c){}},[[111,1,2]]]);
//# sourceMappingURL=main.e3eed104.chunk.js.map